- User Stories
    
    ## Overview
    
    Full medical system where patients,doctor,receptionist,labassistant, pharmacist are getting connected.
    
    all of them are connected through appointments
    
    patient - appointment
    
    appointment - doctor (issues the prescription [medicine + diagnosis + lab report recommendations]
    
    appointment - lab report - lab assistant (lab assistant see the report recommendation and do the lab test on the patient and upload the result sheet(s) to the system. 
    
    appointment - prescription - pharmacist (pharmacists issue the medicine, and marked them as issued)
    
    appointment - Bill - receptionist/ cashier (can make appointments / bill is automatically generated by the system (doctors’s fee + service charges + medicine charges + lab report charges combined)
    
    patient-note-doctor ( doctors can add notes to the patients profile which are onlly accessed by the doctors)
    
    ### Patient
    
    - make appointments - select a doctor, date, take a number in the queue
    - visit previous appointments and upcoming appointments
        - previous appointment data should be accessed ( prescription, lab reports, bill)
        - upcoming appointment data - date, doctor , button to cancel.
    - view all prescriptions
    - view all bills
    - view all lab reports
    - parent’s can link their children’s accounts + older parents account and access them
    
    ### Doctor
    

- Track the revenue ( doctor fee per appointment x number of appointments ) - monthly, daily, weekly
- Track the appointment number - daily, weekly, monthly
- see all the appointments (today / tomorrow any day on calander)
- see the medical history ( issued prescriptioin, Labresults) and parents / children of the patient linked to the appointment.
- Recommend lab tests
    - add a new lab test recommendation → select the lab test from the dropdown.
- issue prescriptions
    - select the medicine (type search - auto suggest when typing dropdown )
    - Dosage ( there can be different pills with different dosages in the same medicine)
    - select the frequency (how much for morning, day, night)
        - each dosage should come with a default frequency that set when adding to the system
        - doctor can edit if needed
    - duration
    - quantity (auto calculate based on the frequency and duration)

### pharmacist

- see all the medicine inventory
- add new medicine
- add new stocks for the medicine
- view all the prescriptions issued by each doctor so i can dispense
- open the prescription and edit if needed ( quantity / remove medicine)

### Receptionist / Cashier

- view all appointments (day month week / according to doctor)
- register new patient to the system ( create new patient accounts)
- link patient accounts (parents,children)
- make new appointments
- cancel appointments
- mark the appointment as arrived / checkedin.

### Lab assistant

- view all the pending lab report requests
- upload report results for the requests
- add new lab test ( new blood test types etc)

### Admin

- manage user accounts (patients , staff)
- see system logs
- monitor the total revenue

Recommended Tech Stack (The "How")
Database & Auth: Supabase (PostgreSQL)

Framework: Next.js 14 (App Router). It allows you to build the API and Frontend in one place.

Styling: Tailwind CSS. It’s fast to write.

UI Components: Shadcn/UI (Highly recommended). It gives you pre-built, professional-looking components (Tables, Dialogs, Forms) that are fully accessible. This will save you weeks of CSS work.

Language: TypeScript. Trust me on this. With complex data like "Appointment includes Prescription includes Medicine," having types will save you from "undefined is not an object" errors during your demo.

1. System Requirement Specification (SRS) - Draft
Project Name: Integrated Medical Management System (IMMS) Module: Business System Engineering (BSE)

1.1 Project Scope
A centralized web-based platform to manage the end-to-end flow of a medical center, connecting Patients, Doctors, Pharmacists, Lab Assistants, and Receptionists. The system handles appointments, clinical history, inventory, lab testing, and centralized billing.

1.2 User Roles & Access Levels
Patient: Mobile-responsive web interface.

Staff (Doctor, Pharmacist, Lab, Reception, Admin): Desktop/Tablet-optimized web application.

1.3 Business Rules (The Logic)
Appointment Queue Logic: A "Fixed Slot" system. If Appointment #5 cancels, the number 5 becomes void. It is not reassigned to maintain queue integrity.

Attendance Policy: Appointments remain "Pending" until the end of the operational day. If not marked "Arrived" by EOD, the system auto-updates status to "Absent".

Billing Cycle: "Post-Service Payment." The final bill is generated and paid at the exit (Reception). This bill aggregates:

Doctor Fees (fixed)

Pharmacy Charges (actual issued quantity)

Lab Charges (requested tests, regardless of result upload status)

Service Charges

Inventory Management: Stock is strictly deducted only when the Pharmacist marks the status as 'Issued'.

Family Linking: Requires Receptionist Verification (manual approval) to prevent unauthorized data access. Once linked, the guardian has Full Historical Access.

1.4 Functional Requirements by Module
A. Patient Module (Mobile Web)
FR-PAT-01: Users shall view a dashboard of upcoming and past appointments.

FR-PAT-02: Users shall be able to book appointments by selecting Doctor + Date.

FR-PAT-03: Users shall receive email/SMS notifications for booking confirmations and status changes.

FR-PAT-04: Linked accounts (Parent/Child) shall allow switching profiles to view dependents' medical data.

B. Clinical Module (Doctor)
FR-DOC-01: System shall display a revenue tracker (Fee × Appt Count) and patient count (Daily/Weekly/Monthly).

FR-DOC-02: Doctor shall have global access to search and view any patient’s full medical history (Privacy Level: Open within Clinical Staff).

FR-DOC-03: Prescription Engine:

Search Medicine (Auto-suggest).

Select Dosage (Default frequency auto-populates).

Edit Frequency/Duration.

Auto-calculate Quantity.

FR-DOC-04: Doctor's Note: A private text field visible only to doctors, hidden from patients and other staff.

C. Pharmacy Module
FR-PHAR-01: Pharmacist shall view the prescription queue.

FR-PHAR-02: Modification Rights: Pharmacist can edit quantity or remove items (e.g., out of stock).

FR-PHAR-03: Billing Trigger: Any edit made by the Pharmacist must automatically update the pending Bill entity in the Reception module.

D. Laboratory Module
FR-LAB-01: Lab Assistant shall view pending test requests linked to appointments.

FR-LAB-02: Users can upload results (PDF/Image) even after the patient has left/paid (as payment happens at exit regardless of result status).

E. Reception & Billing
FR-REC-01: Master Bill Generation: System must aggregate costs from three sources (Doctor config, Pharmacy confirmed list, Lab requests) into one final invoice.

FR-REC-02: Appointment State: Ability to mark patients as "Arrived" (Check-in) and "Closed" (Payment Complete).

FR-REC-03: User Management: Create new patient accounts and approve "Family Link" requests.